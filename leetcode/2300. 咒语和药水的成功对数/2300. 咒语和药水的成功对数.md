# 2300.å’’è¯­å’Œè¯æ°´çš„æˆåŠŸå¯¹æ•°

[ä»£ç .cpp](/leetcode/2300.%20å’’è¯­å’Œè¯æ°´çš„æˆåŠŸå¯¹æ•°/2300.cpp)  

## é¢˜ç›®

ç»™ä½ ä¸¤ä¸ªæ­£æ•´æ•°æ•°ç»„ `spells` å’Œ `potions` ï¼Œé•¿åº¦åˆ†åˆ«ä¸º `n` å’Œ `m` ï¼Œå…¶ä¸­ `spells[i]` è¡¨ç¤ºç¬¬ `i` ä¸ªå’’è¯­çš„èƒ½é‡å¼ºåº¦ï¼Œ`potions[j]` è¡¨ç¤ºç¬¬ `j` ç“¶è¯æ°´çš„èƒ½é‡å¼ºåº¦ã€‚

åŒæ—¶ç»™ä½ ä¸€ä¸ªæ•´æ•° `success` ã€‚ä¸€ä¸ªå’’è¯­å’Œè¯æ°´çš„èƒ½é‡å¼ºåº¦ **ç›¸ä¹˜** å¦‚æœ **å¤§äºç­‰äº** `success` ï¼Œé‚£ä¹ˆå®ƒä»¬è§†ä¸ºä¸€å¯¹ **æˆåŠŸ** çš„ç»„åˆã€‚

è¯·ä½ è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„æ•´æ•°æ•°ç»„ `pairs`ï¼Œå…¶ä¸­ `pairs[i]` æ˜¯èƒ½è·Ÿç¬¬ `i` ä¸ªå’’è¯­æˆåŠŸç»„åˆçš„ **è¯æ°´** æ•°ç›®ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šspells = [5,1,3], potions = [1,2,3,4,5], success = 7
è¾“å‡ºï¼š[4,0,3]
è§£é‡Šï¼š
- ç¬¬ 0 ä¸ªå’’è¯­ï¼š5 * [1,2,3,4,5] = [5,10,15,20,25] ã€‚æ€»å…± 4 ä¸ªæˆåŠŸç»„åˆã€‚
- ç¬¬ 1 ä¸ªå’’è¯­ï¼š1 * [1,2,3,4,5] = [1,2,3,4,5] ã€‚æ€»å…± 0 ä¸ªæˆåŠŸç»„åˆã€‚
- ç¬¬ 2 ä¸ªå’’è¯­ï¼š3 * [1,2,3,4,5] = [3,6,9,12,15] ã€‚æ€»å…± 3 ä¸ªæˆåŠŸç»„åˆã€‚
æ‰€ä»¥è¿”å› [4,0,3] ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šspells = [3,1,2], potions = [8,5,8], success = 16
è¾“å‡ºï¼š[2,0,2]
è§£é‡Šï¼š
- ç¬¬ 0 ä¸ªå’’è¯­ï¼š3 * [8,5,8] = [24,15,24] ã€‚æ€»å…± 2 ä¸ªæˆåŠŸç»„åˆã€‚
- ç¬¬ 1 ä¸ªå’’è¯­ï¼š1 * [8,5,8] = [8,5,8] ã€‚æ€»å…± 0 ä¸ªæˆåŠŸç»„åˆã€‚
- ç¬¬ 2 ä¸ªå’’è¯­ï¼š2 * [8,5,8] = [16,10,16] ã€‚æ€»å…± 2 ä¸ªæˆåŠŸç»„åˆã€‚
æ‰€ä»¥è¿”å› [2,0,2] ã€‚
```

 

**æç¤ºï¼š**

- `n == spells.length`
- `m == potions.length`
- $1 <= n, m <= 10^5$
- $1 <= spells[i], potions[i] <= 10^5$
- $1 <= success <= 10^{10}$



## é¢˜è§£

```cpp
// æ—¶é—´å¤æ‚åº¦O(n log n + m log n)
// ç©ºé—´å¤æ‚åº¦O(m)
class Solution
{
public:
    vector<int> successfulPairs(vector<int> &spells, vector<int> &potions, long long success)
    {
        sort(potions.begin(), potions.end());
        vector<int> pairs;
        for (int a : spells)
        {
            long long sub_success = (success + a - 1) / a; // å¯æ•°å­¦ä¸Šè¯æ˜æ˜¯å‘ä¸Šå–æ•´ï¼Œç¡®ä¿ä¹˜èµ·æ¥æ˜¯â‰¥successçš„
            // åªéœ€è¦æ‰¾åˆ°potionsé‡Œå¤§äºç­‰äºsub_successçš„æ•°çš„ä¸ªæ•°ã€‚å·²å¯¹potionsæ’åºï¼ŒäºŒåˆ†

            int index = distance(potions.begin(), lower_bound(potions.begin(), potions.end(), sub_success));
            if (index < potions.size())
                pairs.push_back(potions.size() - index);

            else
                pairs.push_back(0);
        }

        return pairs;
    }
};
```

47ms,61.46%

125.31MB,14.89%



### æ—¶é—´å¤æ‚åº¦ï¼š

1. sort()

`O(n log n)`

------

2. éå†

-  `lower_bound`   `O(log n)`
- æ€»å…±å¾ªç¯ `m` æ¬¡

`O(m log n)`

------

âœ… æ€»æ—¶é—´å¤æ‚åº¦ï¼š

```bash
O(n log n + m log n)
```



### ç©ºé—´å¤æ‚åº¦

é¢å¤–ç©ºé—´ï¼šå®¹å™¨`pair<int>`

 `O(m)`



## points:

1. `temp.push_back(a * b);`å¯èƒ½æº¢å‡ºï¼Œ`vector<int>`å­˜ä¸äº†â†’æ”¹ä¸º`long long`

2. æ”¹ä¸ºlong longåè¶…å‡ºæ—¶é—´é™åˆ¶

3. **è¶…æ—¶ï¼ˆTLEï¼‰** æ˜¯å› ä¸ºå®ƒçš„ **æ—¶é—´å¤æ‚åº¦è¿‡é«˜**ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸‹é¢è¿™å‡ è¡Œ ğŸ‘‡

   ------

   ## ğŸ” é—®é¢˜æ‰€åœ¨ï¼š

   ```cpp
   for (int a : spells) {
       vector<long long> temp;
       for (int b : potions)
           temp.push_back((long long)a * b);
   
       sort(temp.begin(), temp.end());
       ...
   }
   ```

   è¿™ä¸ªéƒ¨åˆ†æ˜¯ **æ¯æ¬¡ spell éƒ½é‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„ tempï¼Œå¹¶æ’åº**ï¼Œå¤æ‚åº¦æ˜¯ï¼š

   ```cpp
   O(m Ã— n log n)
   ```

   å…¶ä¸­ï¼š

   - `m = spells.size()`
   - `n = potions.size()`

   å¦‚æœ m å’Œ n éƒ½æ¥è¿‘ 1e5ï¼Œå°±ä¼šè¾¾åˆ° **1e5 \* 1e5 log 1e5 = éå¸¸å¤§ï¼ˆ10^10çº§åˆ«ï¼‰**ï¼Œè‡ªç„¶å°±ä¼šè¶…æ—¶ã€‚

4. æ€è€ƒï¼šæœ€åçš„pairsåªéœ€è¦è€ƒè™‘å¤šå°‘å¯¹ï¼Œå¯¹é¡ºåºæ˜¯æ— è¦æ±‚çš„ã€‚åˆ™å¯ä»¥ä¿®æ”¹potionsçš„é¡ºåºï¼Œä»è€Œç®€åŒ–ä»£ç è¿è¡Œ

5. æ”¹å1.1vï¼š

   ```cpp
   class Solution
   {
   public:
       vector<int> successfulPairs(vector<int> &spells, vector<int> &potions, long long success)
       {
           vector<int> pairs;
           for (int a : spells)
           {
               long long sub_success = success / a + 1; // å¯æ•°å­¦ä¸Šè¯æ˜æ˜¯å‘ä¸Šå–æ•´ï¼Œç¡®ä¿ä¹˜èµ·æ¥æ˜¯â‰¥successçš„
               // åªéœ€è¦æ‰¾åˆ°potionsé‡Œå¤§äºç­‰äºsub_successçš„æ•°çš„ä¸ªæ•°ã€‚å¯¹potionsæ’åºåï¼ŒäºŒåˆ†
               sort(potions.begin(), potions.end());
   
               int index = distance(potions.begin(), lower_bound(potions.begin(), potions.end(), sub_success));
               if (index < potions.size())
                   pairs.push_back(potions.size() - index);
   
               else
                   pairs.push_back(0);
           }
   
           return pairs;
       }
   };
   ```

   `long long sub_success = success / a + 1;`ä¿è¯å‘ä¸Šå–æ•´

   ### ğŸ”¹æƒ…å†µ1ï¼šèƒ½æ•´é™¤

   æ¯”å¦‚ `success = 10`, `a = 5`

   ```cpp
   (success + a - 1) / a = (10 + 5 - 1) / 5 = 14 / 5 = 2
   ```
   
   âœ… å’Œ 10 / 5 = 2 ä¸€æ · â†’ æ²¡åŠ  1ï¼Œæ»¡è¶³è¦æ±‚ï¼
   
   ------

   ### ğŸ”¹æƒ…å†µ2ï¼šä¸èƒ½æ•´é™¤

   æ¯”å¦‚ `success = 11`, `a = 5`

   ```cpp
   (11 + 5 - 1) / 5 = 15 / 5 = 3
   ```

   âœ… è‡ªåŠ¨å‘ä¸Šå–æ•´äº†ï¼
   
   

   ä½†è¿˜æ˜¯è¶…æ—¶ã€‚

   å™¢æ¯æ¬¡éƒ½å¯¹potionsæ’åºï¼ŒåµŒå¥—å¾ªç¯å¤ªå¤šæ¬¡äº†ï¼

   æ”¹åæ­£ç¡®

   code1.2v

   ```cpp
   // æ—¶é—´å¤æ‚åº¦O(n log n + m log n)
   // ç©ºé—´å¤æ‚åº¦O(m)
   class Solution
   {
   public:
       vector<int> successfulPairs(vector<int> &spells, vector<int> &potions, long long success)
       {
           sort(potions.begin(), potions.end());
           vector<int> pairs;
           for (int a : spells)
           {
               long long sub_success = (success + a - 1) / a; // å¯æ•°å­¦ä¸Šè¯æ˜æ˜¯å‘ä¸Šå–æ•´ï¼Œç¡®ä¿ä¹˜èµ·æ¥æ˜¯â‰¥successçš„
               // åªéœ€è¦æ‰¾åˆ°potionsé‡Œå¤§äºç­‰äºsub_successçš„æ•°çš„ä¸ªæ•°ã€‚å·²å¯¹potionsæ’åºï¼ŒäºŒåˆ†
   
               int index = distance(potions.begin(), lower_bound(potions.begin(), potions.end(), sub_success));
               if (index < potions.size())
                   pairs.push_back(potions.size() - index);
   
               else
                   pairs.push_back(0);
           }
   
           return pairs;
       }
   };
   ```
   

6. lower_bound()è¿”å›çš„æ˜¯å¤§äºç­‰äºtargetçš„ç¬¬ä¸€ä¸ªå€¼ã€‚å¦‚æœtargetå€¼æ¯”vectorå†…æ‰€æœ‰å€¼éƒ½æ‰“ï¼Œåˆ™è¿”å›çš„æ˜¯vector.end()è¿™ä¸€å°¾åè¿­ä»£å™¨ã€‚å½“ç”¨distanceè½¬åŒ–ä¸ºä¸‹æ ‡ç´¢å¼•æ—¶ï¼Œæ°å¥½å°±æ˜¯vector.size()

   æ‰€ä»¥åœ¨å¾—åˆ°indexåï¼Œè¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœå°äºvector.size()ï¼Œåˆ™ä»indexåˆ°vector.size()-1ï¼Œè¿™æ‰€æœ‰çš„å…ƒç´ éƒ½æ˜¯æ»¡è¶³é¢˜æ„çš„ã€‚

7. å¯¹sub_successçš„å‘ä¸Šå–æ•´ï¼Œä¹Ÿå¯ä»¥è½¬åŒ–æˆ(success-1)/aï¼Œä¹‹åç”¨upper_boundï¼Œæ‰¾åˆ°å¤§äºtargetçš„ç¬¬ä¸€ä¸ªå€¼ï¼Œä¹Ÿèƒ½å®ç°